{% extends "layouts/base.html" %}


<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}


{% endblock stylesheets %}

{% block content %}
                

<!-- [ breadcrumb ] start -->
<div class="page-header">
    <div class="page-block">
        <div class="row align-items-center">
            <div class="col-md-12">
                <div class="page-header-title">
                    <h5 class="m-b-10">Live flight</h5>
                </div>
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('main.dashboard') }}"><i class="feather icon-home"></i></a></li>
                    <li class="breadcrumb-item"><a href="#!">Live flight</a></li>
                    <li class="breadcrumb-item"><a href="#!">Data dump</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- [ breadcrumb ] end -->

 <!-- [ Main Content ] start -->
<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                <h5>Static data</h5>
                <div class="card-header-right">
                    <div class="btn-group card-option">
                        <button id="refresh_button" class="button btn-primary">Refresh</button>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <table class="table table-centered table-nowrap mb-0 rounded">
                    <thead class="thead-light">
                        <tr>
                            <th class="border-0">Variable</th>
                            <th class="border-0">Data</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border-0">Current flight id</td>
                            <td class="border-0 font-weight-bold">{{current_user.active_flight_id}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Current flight unique reference</td>
                            <td class="border-0 font-weight-bold">{{flight.unique_reference}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Source ident</td>
                            <td class="border-0 font-weight-bold">{{flight.source_ident}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Departure code</td>
                            <td class="border-0 font-weight-bold">{{flight.departure_code}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Departure name</td>
                            <td class="border-0 font-weight-bold">{{flight.departure_name}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Destination code</td>
                            <td class="border-0 font-weight-bold">{{flight.destination_code}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Destination name</td>
                            <td class="border-0 font-weight-bold">{{flight.destination_name}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Equipment full name</td>
                            <td class="border-0 font-weight-bold">{{flight.equipment_full_name}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Equipment manufacturer</td>
                            <td class="border-0 font-weight-bold">{{flight.equipment_manufacturer}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Equipment operator</td>
                            <td class="border-0 font-weight-bold">{{flight.equipment_operator}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Equipment model</td>
                            <td class="border-0 font-weight-bold">{{flight.equipment_model}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Passengers - first class</td>
                            <td class="border-0 font-weight-bold">{{flight.passengers_first_class}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Passengers - business class</td>
                            <td class="border-0 font-weight-bold">{{flight.passengers_business_class}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Passengers - premium class</td>
                            <td class="border-0 font-weight-bold">{{flight.passengers_premium_class}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Passengers - economy class</td>
                            <td class="border-0 font-weight-bold">{{flight.passengers_economy_class}}</td>
                        </tr>
                        <tr>
                            <td class="border-0">Cabin crew count</td>
                            <td class="border-0 font-weight-bold">{{flight.cabin_crew_count}}</td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<br>

<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                <h5>Moving data</h5>
                <div class="card-header-right">

                </div>
            </div>

            <div class="card-body">
                <table class="table table-centered table-nowrap mb-0 rounded">
                    <thead class="thead-light">
                        <tr>
                            <th class="border-0">Variable</th>
                            <th class="border-0">Data</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border-0">Current latitude</td>
                            <td class="border-0 font-weight-bold"><span id="current_latitude"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Current longitude</td>
                            <td class="border-0 font-weight-bold"><span id="current_longitude"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Current altitude</td>
                            <td class="border-0 font-weight-bold"><span id="current_altitude"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Current speed</td>
                            <td class="border-0 font-weight-bold"><span id="current_speed"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Current compass</td>
                            <td class="border-0 font-weight-bold"><span id="current_compass"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Door status</td>
                            <td class="border-0 font-weight-bold"><span id="door_status"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Gear handle position</td>
                            <td class="border-0 font-weight-bold"><span id="gear_handle_position"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Parking brake</td>
                            <td class="border-0 font-weight-bold"><span id="parking_brake"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">No smoking sign</td>
                            <td class="border-0 font-weight-bold"><span id="no_smoking_sign"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">Seatbelt sign</td>
                            <td class="border-0 font-weight-bold"><span id="seatbelt_sign"></span></td>
                        </tr>
                        <tr>
                            <td class="border-0">On ground</td>
                            <td class="border-0 font-weight-bold"><span id="on_ground"></span></td>
                        </tr>



                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script src="/static/customjs/livedata.js"></script>

<script>

    update_labels()

    $('#refresh_button').click(function () {
        get_live_data("{{flight.unique_reference}}");
        update_labels();
    })

    function update_labels() {
        $('#current_latitude').html(localStorage.getItem('current_latitude'))
        $('#current_longitude').html(localStorage.getItem('current_longitude'))
        $('#current_altitude').html(localStorage.getItem('current_altitude'))
        $('#current_compass').html(localStorage.getItem('current_compass'))
        $('#current_speed').html(localStorage.getItem('current_speed'))

        $('#door_status').html(localStorage.getItem('door_status'))
        $('#gear_handle_position').html(localStorage.getItem('gear_handle_position'))
        $('#parking_brake').html(localStorage.getItem('parking_brake'))
        $('#no_smoking_sign').html(localStorage.getItem('no_smoking_sign'))
        $('#seatbelt_sign').html(localStorage.getItem('seatbelt_sign'))
        $('#on_ground').html(localStorage.getItem('on_ground'))

        //alert((Date.now() - localStorage.getItem('last_updated_data'))/1000)

    console.log("Updated data")
    }


</script>



{% endblock javascripts %}
